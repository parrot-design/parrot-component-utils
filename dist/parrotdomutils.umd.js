!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ParrotDomUtils={})}(this,(function(t){"use strict";function e(t){if(null===t)return window;if("[object Window]"!==t.toString()){const e=t.ownerDocument;return e&&e.defaultView||window}return t}function n(t){return t instanceof e(t).Element||t instanceof Element}function o(t){return t instanceof e(t).HTMLElement||t instanceof HTMLElement}function i(t){if("undefined"==typeof ShadowRoot)return!1;return t instanceof e(t).ShadowRoot||t instanceof ShadowRoot}function r(t){return t?(t.nodeName||"").toLowerCase():null}function l(t){return((n(t)?t.ownerDocument:t.document)||window.document).documentElement}function c(t){return"html"===r(t)?t:t.assignedSlot||t.parentNode||(i(t)?t.host:null)||l(t)}function f(t){return e(t).getComputedStyle(t)}function u(t){const{overflow:e,overflowX:n,overflowY:o}=f(t);return/auto|scroll|overlay|hidden/.test(e+o+n)}function s(t){return["html","body","#document"].indexOf(r(t))>=0?t.ownerDocument.body:o(t)&&u(t)?t:s(c(t))}function d(t,n=[]){var o;const i=s(t),r=i===(null===(o=t.ownerDocument)||void 0===o?void 0:o.body),l=e(i),f=r?[l].concat(l.visualViewport||[],u(i)?i:[]):i,h=n.concat(f);return r?h:h.concat(d(c(f)))}function h(t){return["table","td","th"].indexOf(r(t))>=0}function a(t){return o(t)&&"fixed"!==getComputedStyle(t).position?t.offsetParent:null}function g(t){const n=e(t);let i=a(t);for(;i&&h(i)&&"static"===getComputedStyle(i).position;)i=a(i);return i&&("html"===r(i)||"body"===r(i)&&"static"===getComputedStyle(i).position)?n:i||function(t){const e=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&o(t)&&"fixed"===getComputedStyle(t).position)return null;let n=c(t);for(;o(n)&&["html","body"].indexOf(r(n))<0;){const t=getComputedStyle(n);if("none"!==t.transform||"none"!==t.perspective||"paint"===t.contain||-1!==["transform","perspective"].indexOf(t.willChange)||e&&"filter"===t.willChange||e&&t.filter&&"none"!==t.filter)return n;n=n.parentNode}return null}(t)}function p(t){const e=t.getBoundingClientRect();return{width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left,x:e.left,y:e.top}}function m(t,e){const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&i(n)){let n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function w(t){const n=e(t);return{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function y(t){return p(l(t)).left+w(t).scrollLeft}function x(t){const n=e(t),o=l(t),i=n.visualViewport;let r=o.clientWidth,c=o.clientHeight,f=0,u=0;return i&&(r=i.width,c=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(f=i.offsetLeft,u=i.offsetTop)),{width:r,height:c,x:f+y(t),y:u}}const b=Math.max;function S(t){var e;const n=l(t),o=w(t),i=null===(e=t.ownerDocument)||void 0===e?void 0:e.body,r=b(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),c=b(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0);let u=-o.scrollLeft+y(t);const s=-o.scrollTop;return"rtl"===f(i||n).direction&&(u+=b(n.clientWidth,i?i.clientWidth:0)-r),{width:r,height:c,x:u,y:s}}function v(t){return Object.assign(Object.assign({},t),{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}const T=Math.max,L=Math.min;function C(t,e){return"viewport"===e?v(x(t)):o(e)?function(t){const e=p(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}(e):v(S(l(t)))}function R(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function W(t){return t!==e(t)&&o(t)?R(t):w(t)}function E(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}const H=()=>E()&&window.document.documentElement;t.canUseDocElement=H,t.canUseDom=E,t.contains=m,t.getBoundingClientRect=p,t.getClippingRect=function(t,e,i){const l=[..."clippingParents"===e?function(t){const e=d(c(t)),i=["absolute","fixed"].indexOf(f(t).position)>=0&&o(t)?g(t):t;return n(i)?e.filter((t=>n(t)&&m(t,i)&&"body"!==r(t))):[]}(t):[].concat(e),i],u=l[0],s=l.reduce(((e,n)=>{const o=C(t,n);return e.top=T(o.top,e.top),e.right=L(o.right,e.right),e.bottom=L(o.bottom,e.bottom),e.left=T(o.left,e.left),e}),C(t,u));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s},t.getCompositeRect=function(t,e,n=!1){const i=l(e),c=p(t),f=o(e);let s={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(f||!f&&!n)&&(("body"!==r(e)||u(i))&&(s=W(e)),o(e)?(d=p(e),d.x+=e.clientLeft,d.y+=e.clientTop):i&&(d.x=y(i))),{x:c.left+s.scrollLeft-d.x,y:c.top+s.scrollTop-d.y,width:c.width,height:c.height}},t.getComputedStyle=f,t.getDocumentElement=l,t.getDocumentRect=S,t.getHTMLElementScroll=R,t.getLayoutRect=function(t){const e=p(t);let n=t.offsetWidth,o=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-o)<=1&&(o=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:o}},t.getNodeName=r,t.getNodeScroll=W,t.getOffsetParent=g,t.getParentNode=c,t.getScrollParent=s,t.getViewportRect=x,t.getWindow=e,t.getWindowScroll=w,t.getWindowScrollBarX=y,t.isElement=n,t.isHTMLElement=o,t.isHidden=function(t){if(!t)return!1;const e=f(t),n="none"===e.display,o=null===t.offsetParent&&"fixed"!==e.position;return n||o},t.isScrollParent=u,t.isShadowRoot=i,t.isStyleSupport=t=>{if(H()){const e=Array.isArray(t)?t:[t],{documentElement:n}=window.document;return e.some((t=>t in n.style))}return!1},t.listScrollParents=d,t.rectToClientRect=v,t.reflow=function(t){return t.scrollTop},Object.defineProperty(t,"__esModule",{value:!0})}));
